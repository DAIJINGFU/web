# åœç‰Œæ•°æ®è¯´æ˜æ–‡æ¡£

## ğŸ“ åœç‰Œæ•°æ®ç›®å½•

**ä½ç½®**: `stockdata/stockdata/åœç‰Œæ•°æ®/`

## ğŸ“‹ æ•°æ®æ ¼å¼è¦æ±‚

### æ–‡ä»¶å‘½åè§„åˆ™

- æ¯ä¸ªè‚¡ç¥¨ä¸€ä¸ª CSV æ–‡ä»¶
- æ–‡ä»¶åæ ¼å¼ï¼š`{è‚¡ç¥¨ä»£ç }.csv`
- ç¤ºä¾‹ï¼š`000001.SZ.csv`, `600000.SH.csv`

### CSV æ–‡ä»¶æ ¼å¼

#### å¿…éœ€åˆ—ï¼ˆä¸­æ–‡æˆ–è‹±æ–‡å‡å¯ï¼‰

| ä¸­æ–‡åˆ—å     | è‹±æ–‡åˆ—å   | æ•°æ®ç±»å‹   | è¯´æ˜               | ç¤ºä¾‹         |
| ------------ | ---------- | ---------- | ------------------ | ------------ |
| åœç‰Œå¼€å§‹æ—¥æœŸ | start_date | æ—¥æœŸå­—ç¬¦ä¸² | YYYY-MM-DD æ ¼å¼    | 2024-03-15   |
| åœç‰Œç»“æŸæ—¥æœŸ | end_date   | æ—¥æœŸå­—ç¬¦ä¸² | YYYY-MM-DD æ ¼å¼    | 2024-03-20   |
| åœç‰ŒåŸå›      | reason     | æ–‡æœ¬       | å¯é€‰ï¼Œè¯´æ˜åœç‰ŒåŸå›  | é‡å¤§èµ„äº§é‡ç»„ |

#### æ”¯æŒçš„åˆ—åå˜ä½“

ç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ«ä»¥ä¸‹åˆ—åï¼š

- åŒ…å«"å¼€å§‹"æˆ–"start"çš„åˆ— â†’ åœç‰Œå¼€å§‹æ—¥æœŸ
- åŒ…å«"ç»“æŸ"æˆ–"end"çš„åˆ— â†’ åœç‰Œç»“æŸæ—¥æœŸ
- åŒ…å«"åŸå› "æˆ–"reason"çš„åˆ— â†’ åœç‰ŒåŸå› 

### ç¤ºä¾‹æ–‡ä»¶å†…å®¹

**000001.SZ.csv**:

```csv
è‚¡ç¥¨ä»£ç ,åœç‰Œå¼€å§‹æ—¥æœŸ,åœç‰Œç»“æŸæ—¥æœŸ,åœç‰ŒåŸå› 
000001.SZ,2024-03-15,2024-03-20,é‡å¤§èµ„äº§é‡ç»„
000001.SZ,2024-06-10,2024-06-10,ä¸´æ—¶åœç‰Œ
000001.SZ,2024-09-05,2024-09-15,è‚¡ä¸œå¤§ä¼šåœç‰Œ
```

**æˆ–ä½¿ç”¨è‹±æ–‡åˆ—å**:

```csv
stock_code,start_date,end_date,reason
600000.SH,2024-01-10,2024-01-15,Major Asset Restructuring
600000.SH,2024-05-20,2024-05-20,Temporary Suspension
```

## ğŸ”§ åœç‰Œæ£€æµ‹é€»è¾‘

### å·¥ä½œåŸç†

1. **è‡ªåŠ¨æŸ¥æ‰¾æ•°æ®æ–‡ä»¶**

   - ç³»ç»Ÿä¼šåœ¨ä»¥ä¸‹è·¯å¾„æŸ¥æ‰¾åœç‰Œæ•°æ®ï¼š
     - `åœç‰Œæ•°æ®/{è‚¡ç¥¨ä»£ç }.csv`
     - `pause_data/{è‚¡ç¥¨ä»£ç }.csv`
     - `åœç‰Œæ•°æ®/{è‚¡ç¥¨ä»£ç å‰ç¼€}.csv`ï¼ˆä¸å¸¦äº¤æ˜“æ‰€åç¼€ï¼‰

2. **åœç‰Œåˆ¤æ–­**

   - å¦‚æœäº¤æ˜“æ—¥æœŸåœ¨ `[åœç‰Œå¼€å§‹æ—¥æœŸ, åœç‰Œç»“æŸæ—¥æœŸ]` åŒºé—´å†…ï¼Œåˆ™è®¤ä¸ºåœç‰Œ
   - åœç‰ŒæœŸé—´ä¹°å…¥/å–å‡ºè®¢å•ä¼šè¢«é˜»æ­¢
   - ä¼šåœ¨æ—¥å¿—ä¸­è®°å½•ï¼š`[pause_check] BLOCK BUY/SELL {è‚¡ç¥¨ä»£ç } paused on {æ—¥æœŸ}`

3. **å®¹é”™å¤„ç†**
   - å¦‚æœæ²¡æœ‰åœç‰Œæ•°æ®æ–‡ä»¶ï¼Œå‡è®¾è‚¡ç¥¨æœªåœç‰Œï¼ˆä¸å½±å“æ­£å¸¸äº¤æ˜“ï¼‰
   - å¦‚æœæ•°æ®æ–‡ä»¶æ ¼å¼é”™è¯¯ï¼Œå‡è®¾æœªåœç‰Œï¼ˆé¿å…è¯¯é˜»ï¼‰

### åœ¨ç­–ç•¥ä¸­çš„è¡¨ç°

```python
def handle_data(context, data):
    stock = '000001.SZ'

    # å¦‚æœè‚¡ç¥¨åœ¨åœç‰ŒæœŸé—´
    # order(stock, 100) ä¼šè¢«é˜»æ­¢
    # è®¢å•çŠ¶æ€ä¼šè¢«æ ‡è®°ä¸º 'BlockedPaused'
    # åœ¨ blocked_orders ä¸­å¯ä»¥çœ‹åˆ°è®°å½•
```

## ğŸ“Š æ•°æ®æ¥æºå»ºè®®

### å¦‚ä½•è·å–åœç‰Œæ•°æ®

1. **èšå®½å¹³å°**

   ```python
   # æŸ¥è¯¢å†å²åœç‰Œæ•°æ®
   from jqdatasdk import get_price
   paused_info = get_price('000001.XSHE',
                          start_date='2024-01-01',
                          end_date='2024-12-31',
                          fields=['paused'])
   ```

2. **Tushare**

   ```python
   import tushare as ts
   pro = ts.pro_api('your_token')
   df = pro.suspend_d(ts_code='000001.SZ',
                      start_date='20240101',
                      end_date='20241231')
   ```

3. **æ‰‹åŠ¨ç»´æŠ¤**
   - ä»äº¤æ˜“æ‰€å…¬å‘Šè·å–
   - æ·±äº¤æ‰€ï¼šhttp://www.szse.cn/
   - ä¸Šäº¤æ‰€ï¼šhttp://www.sse.com.cn/

### æ•°æ®è½¬æ¢ç¤ºä¾‹

```python
import pandas as pd

# ä»èšå®½è·å–çš„åœç‰Œæ•°æ®è½¬æ¢
def convert_jq_pause_data(stock_code, start, end):
    # ... è·å–èšå®½åœç‰Œæ•°æ®
    pause_df = ...  # DataFrame with 'date' and 'paused' columns

    # æ‰¾å‡ºåœç‰ŒåŒºé—´
    pause_periods = []
    in_pause = False
    start_date = None

    for idx, row in pause_df.iterrows():
        if row['paused'] and not in_pause:
            start_date = row['date']
            in_pause = True
        elif not row['paused'] and in_pause:
            pause_periods.append({
                'è‚¡ç¥¨ä»£ç ': stock_code,
                'åœç‰Œå¼€å§‹æ—¥æœŸ': start_date,
                'åœç‰Œç»“æŸæ—¥æœŸ': row['date'],
                'åœç‰ŒåŸå› ': 'åœç‰Œ'
            })
            in_pause = False

    # ä¿å­˜ä¸ºCSV
    result_df = pd.DataFrame(pause_periods)
    result_df.to_csv(f'åœç‰Œæ•°æ®/{stock_code}.csv', index=False)
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ—¥æœŸæ ¼å¼ç»Ÿä¸€**

   - å¿…é¡»ä½¿ç”¨ YYYY-MM-DD æ ¼å¼
   - ä¸æ”¯æŒå…¶ä»–æ—¥æœŸæ ¼å¼ï¼ˆå¦‚ YYYYMMDDï¼‰

2. **åœç‰ŒåŒºé—´åŒ…å«æ€§**

   - åœç‰Œå¼€å§‹æ—¥æœŸå’Œç»“æŸæ—¥æœŸéƒ½åŒ…å«åœ¨åœç‰ŒæœŸå†…
   - ä¾‹å¦‚ï¼šå¼€å§‹=2024-03-15ï¼Œç»“æŸ=2024-03-20
   - åˆ™ 2024-03-15 åˆ° 2024-03-20ï¼ˆå«ï¼‰éƒ½ä¸èƒ½äº¤æ˜“

3. **è‚¡ç¥¨ä»£ç æ ¼å¼**

   - æ”¯æŒ .SZ/.SH å’Œ .XSHE/.XSHG ä¸¤ç§æ ¼å¼
   - ç³»ç»Ÿä¼šè‡ªåŠ¨è½¬æ¢åŒ¹é…

4. **æ€§èƒ½è€ƒè™‘**
   - æ¯æ¬¡ä¸‹å•éƒ½ä¼šè¯»å–åœç‰Œæ•°æ®æ–‡ä»¶
   - å»ºè®®ä¸è¦æ”¾ç½®è¿‡å¤§çš„åœç‰Œå†å²æ•°æ®
   - åªä¿ç•™å›æµ‹æœŸé—´ç›¸å…³çš„åœç‰Œè®°å½•

## ğŸ§ª æµ‹è¯•åœç‰ŒåŠŸèƒ½

åˆ›å»ºæµ‹è¯•ç­–ç•¥éªŒè¯åœç‰Œæ£€æµ‹ï¼š

```python
def initialize(context):
    g.security = '000001.SZ'
    set_option('log_level', 'debug')

def handle_data(context, data):
    # å°è¯•åœ¨åœç‰Œæ—¥ä¹°å…¥ï¼ˆåº”è¯¥è¢«é˜»æ­¢ï¼‰
    if context.current_dt.date().isoformat() == '2024-03-15':
        order(g.security, 100)  # åº”è¯¥è¢«é˜»æ­¢
        print("å°è¯•ä¹°å…¥ï¼ˆåœç‰ŒæœŸé—´ï¼‰")

    # åœ¨éåœç‰Œæ—¥ä¹°å…¥ï¼ˆåº”è¯¥æˆåŠŸï¼‰
    if context.current_dt.date().isoformat() == '2024-03-21':
        order(g.security, 100)  # åº”è¯¥æˆåŠŸ
        print("å°è¯•ä¹°å…¥ï¼ˆåœç‰Œç»“æŸåï¼‰")
```

æŸ¥çœ‹æ—¥å¿—åº”è¯¥çœ‹åˆ°ï¼š

```
[pause_check] BLOCK BUY 000001.SZ paused on 2024-03-15
```

## ğŸ“ˆ ä¸ T+1 åˆ¶åº¦çš„ç»“åˆ

åœç‰Œæ£€æµ‹å’Œ T+1 åˆ¶åº¦æ˜¯ç‹¬ç«‹çš„ä¸¤ä¸ªæ£€æŸ¥ï¼š

1. **åœç‰Œæ£€æŸ¥**ï¼šé˜»æ­¢åœç‰ŒæœŸé—´çš„æ‰€æœ‰ä¹°å–
2. **T+1 æ£€æŸ¥**ï¼šé˜»æ­¢å½“æ—¥ä¹°å…¥çš„è‚¡ç¥¨å½“æ—¥å–å‡º

ä¸¤ä¸ªæ£€æŸ¥éƒ½é€šè¿‡æ‰èƒ½ä¸‹å•æˆåŠŸã€‚

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**åˆ›å»ºæ—¥æœŸ**: 2025-10-08  
**é€‚ç”¨ç³»ç»Ÿ**: backtrader-new1 æœ¬åœ°å›æµ‹ç³»ç»Ÿ
